{{ define "header" }}
<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="utf-8">
		<meta http-equiv="X-UA-Compatible" content="IE=edge">
		<meta name="apple-mobile-web-app-capable" content="yes" />
		<meta name="HandheldFriendly" content="true"/>
		<meta name="viewport" content="width=device-width, initial-scale=0.8, maximum-scale=0.8, user-scalable=no">
		<meta name="theme-color" content="#354463">
		<link rel="shortcut icon" href="{{var "panelPath"}}/pkgFiles/favicon.ico">
		<link rel="icon" sizes="192x192" href="{{var "panelPath"}}/pkgFiles/favicon192x192.png">
		<title>{{.title}}</title>
		<link rel="stylesheet" href="{{var "panelPath"}}/pkgFiles/build/style.css">
		<script type="text/javascript"> window.panelBasePath="{{var "panelPath"}}";</script>
		<script type="text/javascript"> window.moduleName="{{var "moduleName"}}";</script>
		<script type="text/javascript" src="{{var "panelPath"}}/pkgFiles/build/main.js"></script>
		<style>
			.w-title:before {background-image: url("{{var "panelPath"}}/pkgFiles/images/title.png");}
			@media (min-width:1010px) {.navbar-default {background-image: url("{{var "panelPath"}}/pkgFiles/images/title.png");}}
			.w-wrap {background-image: url("{{var "panelPath"}}/pkgFiles/images/bg.png");}
		</style>
	</head>

	<body>
		<div id="all">
			{{template "menu" .}}
			<div class="container" id="content">
{{ end }}

{{ define "footer" }}
			</div>
			<div class="back-to-top">
				<a href="#top">
					<span class="fa fa-chevron-up"></span>
				</a>
			</div>
			<footer>
				<div class="container">
					© 2015-2017 <a style="color: #444444" href="https://github.com/night-codes/summer"><b>Summer</b></a>
				</div>
			</footer>
		</div>
		{{ dot "layout/form-settings.html" }}
		{{ dot "layout/script.js" }}
	</body>
</html>
{{ end }}

{{ define "menu"}}
	<div class="navbar navbar-default navbar-static-top" role="navigation">
		<a name="top"></a>
		<div class="container">
			<div class="navbar-header">
				<button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
					<span class="sr-only">Menu visibility</span>
					<span class="icon-bar"></span>
					<span class="icon-bar"></span>
					<span class="icon-bar"></span>
				</button>
				<a class="navbar-brand" href="{{var "panelPath"}}"><span class="fa fa-books"> </span> </a>
			</div>
			<div class="navbar-collapse collapse">
				<ul class="nav navbar-nav">
					{{template "subMenu" (var "mainMenu")}}
				</ul>
				<ul class="nav navbar-nav navbar-right">
					<li>
						<input type="text" class="allsearch" placeholder="Поиск" class="form-control">
					</li>
					<li class="dropdown {{if .active.admins}}active{{end}}">
						<a href="#" class="dropdown-toggle" data-toggle="dropdown"><span class="fa fa-user"></span> {{.user.Name}} <b class="caret"></b></a>
						<ul class="dropdown-menu">
							{{range menu (var "dropMenu")}}{{if not .SubMenu }}{{template "menuItem" .}}{{end}}{{end}}
							<li class="divider"></li>
							<li><a href="{{var "panelPath"}}/logout">Logout</a></li>
						</ul>
					</li>
				</ul>
			</div>
		</div>
	</div>
{{ end }}

{{ define "menuItem" }}
	<li class="">
		<a href="{{var "panelPath"}}{{ .Link }}">{{ .Title }}</a>
	</li>
{{end}}

{{ define "subMenu" }}
	{{range menu .}}{{if and .SubMenu .Current }}
	<li class="dropdown"><a href="#" class="dropdown-toggle" data-toggle="dropdown">{{ .Title }} <b class="caret"></b></a>
		<ul class="dropdown-menu">
			{{template "subMenu" .Current}}
		</ul>
	</li>
	{{else}}{{template "menuItem" .}}{{end}}{{end}}
{{end}}
